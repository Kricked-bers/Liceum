import random

questions = [
    # Линейная алгебра и аналитическая геометрия (10 вопросов)
    {
        "question": "Что такое ранг матрицы?",
        "options": [
            "Сумма элементов главной диагонали",
            "Наибольший порядок ненулевого минора",
            "Количество строк матрицы",
            "Определитель матрицы",
        ],
        "correct": 1,
    },
    {
        "question": "Какой метод решения СЛУ основан на последовательном исключении переменных?",
        "options": ["Метод Крамера", "Метод Гаусса", "Матричный метод", "Правило Лопиталя"],
        "correct": 1,
    },
    {
        "question": "Что выражает смешанное произведение трех векторов?",
        "options": ["Площадь параллелограмма", "Объем параллелепипеда", "Угол между векторами", "Проекцию вектора"],
        "correct": 1,
    },
    {
        "question": "Какая кривая описывается уравнением x²/a² + y²/b² = 1?",
        "options": ["Окружность", "Гипербола", "Эллипс", "Парабола"],
        "correct": 2,
    },
    {
        "question": "Что характеризует определитель матрицы?",
        "options": ["Ранг матрицы", "Обратную матрицу", "Масштабное преобразование", "Собственные значения"],
        "correct": 2,
    },
    {
        "question": "Как называется система векторов, если ни один вектор нельзя выразить через другие?",
        "options": ["Ортогональная", "Нормированная", "Линейно независимая", "Базисная"],
        "correct": 2,
    },
    {
        "question": "Что такое собственные значения матрицы?",
        "options": [
            "Элементы главной диагонали",
            "Корни характеристического уравнения",
            "Суммы элементов строк",
            "Определители подматриц",
        ],
        "correct": 1,
    },
    {
        "question": "Какой вид имеет уравнение плоскости в пространстве?",
        "options": ["y = kx + b", "Ax + By + Cz + D = 0", "(x-a)² + (y-b)² = R²", "x²/a² - y²/b² = 1"],
        "correct": 1,
    },
    {
        "question": "Что вычисляется по формуле √(x² + y² + z²) для вектора?",
        "options": ["Скалярное произведение", "Длину вектора", "Косинус угла", "Площадь проекции"],
        "correct": 1,
    },
    {
        "question": "Какая поверхность описывается уравнением z = x²/a² - y²/b²?",
        "options": ["Эллиптический параболоид", "Гиперболический параболоид", "Однополостный гиперболоид", "Конус"],
        "correct": 1,
    },
    # Математический анализ (10 вопросов)
    {
        "question": "Геометрический смысл производной - это...",
        "options": ["Площадь под кривой", "Угловой коэффициент касательной", "Длина кривой", "Объем тела вращения"],
        "correct": 1,
    },
    {
        "question": "Какая теорема утверждает, что f(b)-f(a) = f'(c)(b-a)?",
        "options": ["Теорема Ферма", "Теорема Ролля", "Теорема Лагранжа", "Теорема Коши"],
        "correct": 2,
    },
    {
        "question": "Что вычисляет определенный интеграл?",
        "options": [
            "Производную функции",
            "Площадь криволинейной трапеции",
            "Предел последовательности",
            "Дифференциал функции",
        ],
        "correct": 1,
    },
    {
        "question": "Как называется главная часть приращения функции?",
        "options": ["Производная", "Дифференциал", "Первообразная", "Предел"],
        "correct": 1,
    },
    {
        "question": "Для каких неопределенностей применяется правило Лопиталя?",
        "options": ["0/0 и ∞/∞", "1^∞ и ∞⁰", "0*∞ и ∞-∞", "Всех перечисленных"],
        "correct": 3,
    },
    {
        "question": "Какая формула описывает разложение функции в ряд?",
        "options": ["Формула Ньютона-Лейбница", "Формула Тейлора", "Формула Байеса", "Формула Пуассона"],
        "correct": 1,
    },
    {
        "question": "Как называется точка, где производная равна нулю или не существует?",
        "options": ["Точка перегиба", "Критическая точка", "Точка разрыва", "Особая точка"],
        "correct": 1,
    },
    {
        "question": "Что такое первообразная функции?",
        "options": [
            "Обратная функция",
            "Функция, производная которой равна данной",
            "Предел функции",
            "Дифференциал функции",
        ],
        "correct": 1,
    },
    {
        "question": "Какой метод интегрирования использует формулу ∫u dv = uv - ∫v du?",
        "options": [
            "Замена переменной",
            "Интегрирование по частям",
            "Разложение на простейшие",
            "Тригонометрическая подстановка",
        ],
        "correct": 1,
    },
    {
        "question": "Что характеризует вторая производная функции?",
        "options": [
            "Скорость изменения функции",
            "Выпуклость/вогнутость графика",
            "Точки экстремума",
            "Асимптоты функции",
        ],
        "correct": 1,
    },
    # Теория вероятностей и статистика (5 вопросов)
    {
        "question": "Какая формула описывает полную вероятность события?",
        "options": [
            "P(A|B) = P(AB)/P(B)",
            "P(A) = Σ P(Hᵢ)P(A|Hᵢ)",
            "P(AB) = P(A)P(B)",
            "P(A + B) = P(A) + P(B) - P(AB)",
        ],
        "correct": 1,
    },
    {
        "question": "Какое распределение описывает число успехов в n испытаниях Бернулли?",
        "options": ["Нормальное", "Пуассона", "Биномиальное", "Экспоненциальное"],
        "correct": 2,
    },
    {
        "question": "Что характеризует дисперсия случайной величины?",
        "options": ["Среднее значение", "Медиану распределения", "Разброс значений", "Моду распределения"],
        "correct": 2,
    },
    {
        "question": "Как называется оценка для математического ожидания?",
        "options": ["Выборочное среднее", "Выборочная дисперсия", "Медиана выборки", "Мода выборки"],
        "correct": 0,
    },
    {
        "question": "Какая теорема позволяет пересчитывать вероятности гипотез?",
        "options": ["Теорема Байеса", "Центральная предельная теорема", "Теорема Чебышева", "Закон больших чисел"],
        "correct": 0,
    },
    # Релятивистская механика (5 вопросов)
    {
        "question": "Какой постулат является основой специальной теории относительности?",
        "options": [
            "Принцип суперпозиции",
            "Принцип инвариантности скорости света",
            "Принцип минимального действия",
            "Принцип неопределенности",
        ],
        "correct": 1,
    },
    {
        "question": "Что такое Лоренц-фактор?",
        "options": ["γ = 1/√(1 - v²/c²)", "F = ma", "E = kx²/2", "p = h/λ"],
        "correct": 0,
    },
    {
        "question": "Какая формула описывает связь энергии и импульса в СТО?",
        "options": ["E = mc²", "E² = (pc)² + (m₀c²)²", "p = mv", "F = dp/dt"],
        "correct": 1,
    },
    {
        "question": "Что происходит с длиной движущегося объекта вдоль направления движения?",
        "options": ["Увеличивается", "Уменьшается", "Остается неизменной", "Зависит от ускорения"],
        "correct": 1,
    },
    {
        "question": "Как называется инвариантная величина в пространстве-времени?",
        "options": ["Интервал", "Импульс", "Энергия", "Скорость"],
        "correct": 0,
    },
]


def run_quiz():
    score = 0
    selected_questions = random.sample(questions, 15)  # Выбираем 15 случайных вопросов

    for i, q in enumerate(selected_questions, 1):
        print(f"\n{'=' * 50}\nВопрос {i}/{len(selected_questions)}: {q['question']}")

        # Перемешиваем варианты ответов
        options = q["options"][:]
        correct_option = options[q["correct"]]
        random.shuffle(options)
        new_correct_index = options.index(correct_option)

        for j, option in enumerate(options):
            print(f"{j + 1}. {option}")

        while True:
            try:
                answer = int(input("\nВаш ответ (введите номер): ")) - 1
                if 0 <= answer < len(options):
                    break
                print(f"Пожалуйста, введите число от 1 до {len(options)}")
            except ValueError:
                print("Пожалуйста, введите число")

        if answer == new_correct_index:
            print("\n✅ Правильно! +1 балл")
            score += 1
        else:
            print(f"\n❌ Неверно. Правильный ответ: {new_correct_index + 1}. {correct_option}")

    print(f"\n{'=' * 50}")
    print(f"Тест завершен! Ваш результат: {score}/{len(selected_questions)} баллов")
    percent = score / len(selected_questions) * 100

    # Детальная оценка
    print("\nАнализ результатов:")
    if percent >= 90:
        print("Отличный результат! Вы настоящий эксперт! 🏆")
    elif percent >= 75:
        print("Очень хорошо! Вы отлично разбираетесь в материале! 🌟")
    elif percent >= 60:
        print("Хороший результат! Солидные знания! 👍")
    elif percent >= 45:
        print("Удовлетворительно. Есть над чем поработать. 📚")
    else:
        print("Вам стоит уделить больше времени изучению этих тем. 💪")

    print("\nРекомендации по темам:")
    if percent < 60:
        print("- Повторите ключевые концепции линейной алгебры и математического анализа")
        print("- Изучите основы теории вероятностей и статистики")
        print("- Освежите знания по специальной теории относительности")
    elif percent < 80:
        print("- Углубите знания по векторному анализу и тензорам")
        print("- Изучите более сложные разделы математической статистики")
        print("- Рассмотрите приложения СТО в современной физике")
    else:
        print("- Изучайте тензорное исчисление и дифференциальную геометрию")
        print("- Освойте методы математического моделирования")
        print("- Исследуйте общую теорию относительности и квантовую механику")


if __name__ == "__main__":
    print("=" * 50)
    print("КОМПЛЕКСНЫЙ ТЕСТ ПО МАТЕМАТИКЕ И ФИЗИКЕ".center(50))
    print("=" * 50)
    print("\nТест включает 15 случайно выбранных вопросов по:")
    print("- Линейной алгебре и аналитической геометрии")
    print("- Математическому анализу")
    print("- Теории вероятностей и статистике")
    print("- Релятивистской механике")
    print("\nЗа каждый правильный ответ вы получаете 1 балл")

    input("\nНажмите Enter чтобы начать тест...")
    run_quiz()
